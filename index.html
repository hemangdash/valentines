<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine, Kutlu Putlu?</title>
  <style>
    :root{
      --bg:#f4e9fb;           /* lilac background */
      --accent:#9b6bd6;       /* lilac accent */
      --accent-soft:#e6d7f5;  /* soft lilac */
      --muted:#6a5a7a;
    }
    html,body{background:radial-gradient(circle at 10% 10%, #efe3fb, transparent 25%),var(--bg);display:flex;align-items:center;justify-content:center;padding:24px}
    body{background:radial-gradient(circle at 10% 10%, #ffeef8, transparent 20%),var(--bg);display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:720px;background:white;border-radius:20px;box-shadow:0 12px 30px rgba(0,0,0,0.12);padding:28px;position:relative;overflow:hidden}
    .hearts{position:absolute;inset:0;pointer-events:none;opacity:.15;background-image:radial-gradient(circle at 20% 20%, rgba(255,92,138,.12), transparent 10%), radial-gradient(circle at 80% 80%, rgba(255,200,230,.08), transparent 10%)}
    h1{margin:0 0 8px;font-size:28px;color:var(--accent)}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .question{font-size:20px;margin:18px 0}
    .options{display:flex;gap:12px;flex-wrap:wrap}
    button.opt{flex:1 1 140px;padding:12px 16px;border-radius:12px;border:2px solid transparent;background:linear-gradient(180deg,#fff,#fff);cursor:pointer;font-weight:600}
    button.opt:hover{transform:translateY(-3px)}
    .btn-yes{background:linear-gradient(180deg,#f3e9ff,#eadcff);border-color:rgba(155,107,214,.25);color:var(--accent)}
    .btn-no{background:linear-gradient(180deg,#f7f7f7,#fff);border-color:#eee;color:#333}
    .small{font-size:13px;color:#999;margin-top:12px}
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:20px}
    .progress{height:8px;background:#f2f2f2;border-radius:99px;overflow:hidden;flex:1;margin-right:12px}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#b08be8,#9b6bd6);width:0%}
    .close{background:none;border:none;color:#bbb;font-weight:700;cursor:pointer}
    .popup{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center}
    .popup .box{background:white;padding:22px;border-radius:12px;max-width:420px;text-align:center}
    .logo{position:absolute;right:18px;top:18px;font-weight:700;color:#c2a7e8}
    @media(max-width:480px){h1{font-size:22px}.card{padding:18px}}

    /* Floating lilac hearts */
    .floating-hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden}
    .floating-hearts .heart{position:absolute;left:50%;top:100%;width:28px;height:28px;transform:translateX(-50%) translateY(0) scale(0.8);opacity:0;will-change:transform,opacity}
    .floating-hearts .heart svg{width:100%;height:100%;display:block}
    @keyframes floatUp {0%{transform:translateX(-50%) translateY(0) scale(0.8);opacity:0}10%{opacity:1}100%{transform:translateX(-50%) translateY(-420px) scale(1);opacity:0}}

    /* Title gradient */
    h1{background:linear-gradient(90deg,var(--accent),var(--accent-soft));-webkit-background-clip:text;background-clip:text;color:transparent}

    /* Sparkles when Yes clicked */
    .sparkle{position:fixed;pointer-events:none;width:10px;height:10px;border-radius:50%;opacity:0}
    @keyframes sparkle-move{0%{transform:translateY(0) scale(1);opacity:1}100%{transform:translateY(-60px) scale(0.2);opacity:0}}
    .sparkle.sparkle-1{background:rgba(255,255,255,0.9)}
    .sparkle.sparkle-2{background:rgba(255,240,255,0.95)}
    .sparkle.sparkle-3{background:rgba(230,215,255,0.95)}

    /* gentle shadow for hearts */
    .heart svg path{filter:drop-shadow(0 4px 8px rgba(120,80,140,0.12))}


    /* Floating lilac hearts */
    .floating-hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden}
    .floating-hearts .heart{position:absolute;left:50%;top:100%;width:28px;height:28px;transform:translateX(-50%) translateY(0) scale(0.8);opacity:0;will-change:transform,opacity}
    .floating-hearts .heart svg{width:100%;height:100%;display:block}
    @keyframes floatUp {0%{transform:translateX(-50%) translateY(0) scale(0.8);opacity:0}10%{opacity:1}100%{transform:translateX(-50%) translateY(-420px) scale(1);opacity:0}}

    /* Title gradient */
    h1{background:linear-gradient(90deg,var(--accent),var(--accent-soft));-webkit-background-clip:text;background-clip:text;color:transparent}

    /* Sparkles when Yes clicked */
    .sparkle{position:fixed;pointer-events:none;width:10px;height:10px;border-radius:50%;opacity:0}
    @keyframes sparkle-move{0%{transform:translateY(0) scale(1);opacity:1}100%{transform:translateY(-60px) scale(0.2);opacity:0}}
    .sparkle.sparkle-1{background:rgba(255,255,255,0.9)}
    .sparkle.sparkle-2{background:rgba(255,240,255,0.95)}
    .sparkle.sparkle-3{background:rgba(230,215,255,0.95)}

    /* gentle shadow for hearts */
    .heart svg path{filter:drop-shadow(0 4px 8px rgba(120,80,140,0.12))}

  </style>
</head>
<body>
  <div class="card" role="application" aria-label="Valentine quiz">
    <div class="hearts"></div>
    <div class="floating-hearts" aria-hidden></div>
    <div class="floating-hearts" aria-hidden></div>
    <div class="logo">üíå</div>

    <h1>Little Love Quiz</h1>
    <p class="lead">A tiny, silly quiz for you ‚Äî answer for a secret surprise. No spoilers.</p>

    <div id="screen">
      <!-- Screens are rendered by JS -->
    </div>

    <div class="footer">
      <div class="progress" aria-hidden><i id="prog"></i></div>
      <button class="close" id="restart" title="Restart">‚Ü∫</button>
    </div>
  </div>

  <template id="q-template">
    <div>
      <div class="question" id="q-text"></div>
      <div class="options" id="q-opts"></div>
      <div class="small">Answer honestly ‚Äî except that one question. üëÄ</div>
    </div>
  </template>

  <script>
    // Questions array. One of them is the secret decision (mini-golf vs bowling) but displayed as normal.
    const questions = [
      {id: 'q0', text: 'Will you be my Valentine, Kutlu Putlu?', type: 'yesno'},
      {id: 'q1', text: 'Which would be more fun for a surprise date (pick one): mini golf or bowling?', type: 'choice', choices:['Mini golf','Bowling'], secret:true},
      {id: 'q2', text: 'Which dessert should I *not* forget to bring?', type: 'choice', choices:['Chocolate Cake','Brownies','Ice Cream']},
      {id: 'q3', text: 'Who is your favorite?', type: 'choice', choices:['Butterbear','Lavindar','Black Currant','Spingu']},
      {id: 'q4', text: 'Which song do you like the most?', type: 'choice', choices:['Darkhaast','Uff Teri Adaa','Tere Liye','Ye Tune Kya Kiya']},
      {id: 'q5', text: 'Choose a color I should use for the surprise decorations', type: 'choice', choices:['Blush Pink','Rose Gold','Lilac','Deep Purple']},
      {id: 'q6', text: 'Random question: Which museum did you like the best?', type:'choice', choices:['National Art Gallery, DC','Museum of Fine Arts, Boston','Philadelphia Art Museum']}
    ];

    let answers = {};
    let current = 0;
    const screen = document.getElementById('screen');
    const template = document.getElementById('q-template');
    const prog = document.getElementById('prog');
    const restart = document.getElementById('restart');

    const funnyNoReplies = [
      "Hmm, that's a bold 'no' ‚Äî but my heart hears 'maybe'. Try again?",
      "No? Are you sure your mouse isn't stuck? (Click 'Yes' if it is.)",
      "I'll accept that as a practice 'no'. Want to try the real one?",
      "Interesting choice. Let‚Äôs pretend you didn‚Äôt click that and try again üòå",
      "That button seems confused. Want to give it another go?",
      "No? Bold. Iconic. Incorrect. Try again?",
      "Error 404: \'No\' not supported on this page."
    ];

    function launchHeart(){
      const container = document.querySelector('.floating-hearts');
      if(!container) return;
      const heart = document.createElement('div');
      heart.className = 'heart';
      const left = 6 + Math.random()*88;
      heart.style.left = left + '%';
      const delay = Math.random()*600;
      const dur = 3000 + Math.random()*3000;
      heart.innerHTML = `<svg viewBox="0 0 32 29.6" fill="#d7b6f2" xmlns="http://www.w3.org/2000/svg"><path d="M23.6 0c-2.8 0-4.9 1.6-6.1 3.1C16.3 1.6 14.2 0 11.4 0 5.1 0 .6 4.6 .6 10c0 7.1 8.4 11.8 15.4 19.6 0 0 1.6-1.4 1.6-1.4s15.1-11.9 15.1-19.6C32.8 4.6 28.3 0 23.6 0z"/></svg>`;
      heart.style.animation = `floatUp ${dur}ms linear ${delay}ms forwards`;
      container.appendChild(heart);
      setTimeout(()=>{ if(heart && heart.parentNode) heart.parentNode.removeChild(heart); }, dur + delay + 100);
    }

    // spawn hearts occasionally for a gentle floating effect
    setInterval(()=>{ if(Math.random() < 0.6) launchHeart(); }, 800);

    function renderQuestion(i){
      prog.style.width = Math.round((i / questions.length) * 100) + '%';
      const q = questions[i];
      const frag = template.content.cloneNode(true);
      frag.getElementById('q-text').textContent = q.text;
      const opts = frag.getElementById('q-opts');

      if(q.type === 'yesno'){
        const yes = createBtn('Yes', ()=>{ answers[q.id]='Yes'; next(); }, 'btn-yes');
        const no = createBtn('No', ()=>{ handleNo(); }, 'btn-no');
        opts.appendChild(yes); opts.appendChild(no);
      } else if(q.type === 'choice'){
        q.choices.forEach(c=>{
          const btn = createBtn(c, ()=>{ answers[q.id]=c; next(); });
          opts.appendChild(btn);
        });
      }

      screen.innerHTML = '';
      screen.appendChild(frag);
    }

    function createBtn(text, onClick, extraClass){
      const b = document.createElement('button');
      b.className = 'opt ' + (extraClass||'');
      b.textContent = text;
      b.setAttribute('aria-label', text);
      if((extraClass||'').includes('btn-yes')){
        b.onclick = function(e){
          try{
            const rect = b.getBoundingClientRect();
            const cx = rect.left + rect.width/2;
            const cy = rect.top + rect.height/2;
            spawnSparkles(cx, cy);
          }catch(e){}
          onClick();
        };
      } else {
        b.onclick = onClick;
      }
      return b;
    }

    function handleNo(){
      // Show a funny popup, then re-show the same question with a different cheeky prompt.
      const idx = Math.floor(Math.random()*funnyNoReplies.length);
      const box = document.createElement('div');
      box.className = 'popup';
      box.innerHTML = `<div class="box"><p style="font-size:18px;margin:0 0 12px">${funnyNoReplies[idx]}</p><button id="okbtn" style="padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:white;font-weight:700">Try again</button></div>`;
      document.body.appendChild(box);
      document.getElementById('okbtn').focus();
      document.getElementById('okbtn').onclick = ()=>{ document.body.removeChild(box); /* replay same question */ renderQuestion(0); };
    }

    function next(){
      // If the first answer was 'Yes' we advance; otherwise it's handled above.
      if(current === 0 && answers['q0']!=='Yes') return;
      current++;
      if(current < questions.length){
        renderQuestion(current);
      } else {
        showFinal();
      }
    }

    function showFinal(){
      prog.style.width = '100%';
      // We purposely do NOT reveal how the secret question influences the plan.
      const div = document.createElement('div');
      div.innerHTML = `
        <h2 style="color:var(--accent)">All set ‚Äî thank you ‚ù§Ô∏è</h2>
        <p style="color:#444">Your answers are saved. I have a little surprise planned based on what you picked. It's a secret (shh!), so I won't spoil it here.</p>
        <p style="color:#666">If you want a hint: one of your answers quietly nudged the plan. But the surprise will be kept until Valentine's Day.</p>
        <div style="margin-top:16px;display:flex;gap:12px;flex-wrap:wrap">
          <button id="replay" class="opt">See answers (just to check)</button>
          <button id="done" class="opt btn-yes">Close</button>
        </div>
      `;
      screen.innerHTML = '';
      screen.appendChild(div);
      document.getElementById('replay').onclick = showAnswers;
      document.getElementById('done').onclick = ()=>{ screen.innerHTML = `<p style="font-size:18px;color:var(--muted)">Thanks again ‚Äî I'll follow up with the surprise in person. üíñ</p>` };

      // For privacy: don't print the secret plan here. But we do store the answers in `answers` object.
      // Send answers via Formspree (email delivery)
      const FORMSPREE_ENDPOINT = 'https://formspree.io/f/mnjzlgao';
      fetch(FORMSPREE_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          subject: 'Valentine Quiz Answers',
          answers,
          submittedAt: new Date().toISOString(),
          userAgent: navigator.userAgent
        })
      }).catch(()=>{});

      console.log('Quiz answers sent (silently).');
    }

    function showAnswers(){
      const lines = Object.keys(answers).map(k=>{
        const q = questions.find(x=>x.id===k);
        return `<li><strong>${q.text}</strong><br/><em>${answers[k]}</em></li>`;
      }).join('');
      screen.innerHTML = `<div><h3>Answers you gave</h3><ul style="line-height:1.7;color:#333">${lines}</ul><div style="margin-top:12px"><button id="back" class="opt">Back</button></div></div>`;
      document.getElementById('back').onclick = showFinal;
    }

    restart.onclick = ()=>{ if(confirm('Restart the little quiz?')){answers={};current=0;renderQuestion(0);} };

    // Start
    renderQuestion(0);

    // Accessibility: keyboard support for option buttons
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        const firstBtn = document.querySelector('.opt');
        if(firstBtn) firstBtn.click();
      }
    });

  </script>
</body>
</html>
